dependencies:
  pre:
    - echo y | android update sdk --no-ui --all --filter "tool"
    - echo y | $ANDROID_HOME/tools/bin/sdkmanager "extras;m2repository;com;android;support;constraint;constraint-layout-solver;1.0.2"
#    - echo y | android update sdk --no-ui --all --filter "build-tools-25.0.2"
#    - echo y | android update sdk --no-ui --all --filter "extra-android-m2repository"
#    - echo y | android update sdk --no-ui --all --filter "android-25"
#    - echo y | android update sdk --no-ui --all --filter "platform-tools"
#    - echo y | android update sdk --no-ui --all --filter "tools"
#    - echo y | android update sdk --no-ui --all --filter "tool,extra-android-m2repository,extra-android-support,extra-google-google_play_services,extra-google-m2repository"
#    - echo y | sdkmanager "extras;m2repository;com;android;support;constraint;constraint-layout;1.0.2"
  cache_directories: # relative to the build directory
      - "~/.gradle"   #cache gradle downloads between builds
#      - "$ANDROID_HOME"   #cache gradle downloads between builds

test:
   override:
     # start lint
     #- ./gradlew lint
     # start unit tests
     - ./gradlew test
     # start the emulator
#     - emulator -avd circleci-android24 -no-window:
#         background: true
#         parallel: true
     # wait for it to have booted
#     - circle-android wait-for-boot
     # run tests  against the emulator.
#     - ./gradlew connectedAndroidTest
     # copy lint outputs to artifacts
     - cp -r app/build/reports/lint-* $CIRCLE_ARTIFACTS
     # copy the build outputs to artifacts
     - cp -r app/build/outputs/apk/* $CIRCLE_ARTIFACTS
     # copy the test results to the test results directory.
     - cp -r app/build/outputs/androidTest-results/* $CIRCLE_TEST_REPORTS
